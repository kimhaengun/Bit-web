<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<style type="text/css">
	table{
		border-collapse: collapse;
		width: 100%;
	}
	table,th,td{
		border: 1px solid gray;
	}
	
</style>
<script type="text/javascript">
	var table, tbody, xhr;
	window.onload=function(){
		table=document.querySelector('table');
		tbody=document.querySelector('tbody');
		xhr=new XMLHttpRequest();
		init();
	}
	function init(){
		xhr.onreadystatechange=getList;
		xhr.open('get','json01.jsp');
		xhr.send();
	}
	function getList(){
		if(xhr.readyState==4 && xhr.status==200){
			var data = xhr.responseText;
			//parse = String --> JSON Object / JSON 문자열을 JavaScript Object로 변환
			//stringify = JSON Object --> String / JavaScript Object를 JSON 문자열로 변환
			data = JSON.parse(data);
			var msg="";
			data.emp.forEach(function(ele, idx){
				msg+="<tr>";
				msg+="<td>"+ele.empno+"</td>";
				msg+="<td>"+ele.ename+"</td>";
				msg+="<td>"+ele.hiredate+"</td>";
				msg+="<td>"+ele.sal+"</td>";
				msg+="<td>"+ele.comm+"</td>";
				msg+="</tr>";
			});
			tbody.innerHTML=msg;
		}
	}
	
	
</script>
</head>
<body>
	<h1>JSON Parsing</h1>
	<table>
		<thead>
			<tr>
				<th>empno</th>
				<th>ename</th>
				<th>hiredate</th>
				<th>sal</th>
				<th>comm</th>
			</tr>
		</thead>
		<tbody>
			
		</tbody>
	</table>
</body>
</html>